// ContrataFácil - Sistema de Recepción de CVs
// Schema v1.0

generator client {
  provider        = "prisma-client-js"
  driverAdapters  = true
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

// Negocio/Tienda que busca personal
model Negocio {
  id              String   @id @default(cuid())
  nombre          String
  slug            String   @unique
  email           String   @unique
  password        String
  telefono        String?
  direccion       String?
  descripcion     String?
  logoUrl         String?
  
  // Configuración de vacantes
  activo          Boolean  @default(true)
  buscandoPersonal Boolean @default(true)
  puestoBuscado   String?  @default("Personal general")
  requisitos      String?
  
  // Redes sociales
  whatsapp        String?
  facebook        String?
  instagram       String?
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  candidatos      Candidato[]
  sesiones        Sesion[]
}

// Aspirante que envía su CV
model Candidato {
  id              String   @id @default(cuid())
  negocioId       String
  
  // Datos personales
  nombre          String
  email           String
  telefono        String
  direccion       String?
  fechaNacimiento String?
  fotoUrl         String?
  
  // Información profesional
  puestoSolicitado String?
  experiencia     String?    // Años de experiencia
  educacion       String?    // Nivel educativo
  habilidades     String?    // Lista de habilidades
  experienciaDetallada String? // Descripción de experiencia
  disponibilidad  String?    // Tiempo completo, medio tiempo, etc
  
  // Documentos
  cvUrl           String?    // URL del CV subido
  
  // Estado
  estado          String    @default("nuevo") // nuevo, revisado, contactado, contratado, rechazado
  notas           String?    // Notas del negocio
  
  createdAt       DateTime @default(now())
  updatedAt       DateTime @updatedAt
  
  negocio         Negocio  @relation(fields: [negocioId], references: [id], onDelete: Cascade)
  
  @@unique([negocioId, email])
  @@index([negocioId])
  @@index([estado])
}

model Sesion {
  id        String   @id @default(cuid())
  negocioId String
  token     String   @unique
  expiresAt DateTime
  createdAt DateTime @default(now())
  
  negocio   Negocio  @relation(fields: [negocioId], references: [id], onDelete: Cascade)
  
  @@index([negocioId])
}
